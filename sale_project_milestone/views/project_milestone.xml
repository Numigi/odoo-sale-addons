<?xml version="1.0" encoding="UTF-8"?>

<odoo>

    <record id="project_milestone_sale_form" model="ir.ui.view">
        <field name="name">Project Milestone Sale</field>
        <field name="model">project.milestone</field>
        <field name="inherit_id" ref="project_milestone_estimated_hours.project_milestone_estimated_hours_form"/>
        <field name="arch" type="xml">
            <field name="target_date" position="after">
                <field name="sale_line_id" options="{'no_create': True}" domain="domain_sale_line_id"/>
                <field name="order_id" invisible="True"/>
                <field name="domain_sale_line_id" invisible="True"/>
            </field>
        </field>
    </record>

    <!-- Form View -->
    <record id="project_milestone_estimated_hours_form" model="ir.ui.view">
        <field name="name">Project Milestone Estimated Hours Form</field>
        <field name="model">project.milestone</field>
        <field name="priority">32</field>
        <field name="arch" type="xml">
            <form string="Milestone Form">
                <sheet>
	                <div class="oe_button_box" name="button_box" groups="base.group_user">
	                    <button name="toggle_active" type="object"
	                            class="oe_stat_button" icon="fa-archive">
	                            <field name="active" widget="boolean_button"
	                                   options='{"terminology": "archive"}'/>
	                    </button>
	                </div>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only" string="Name" />
                        <h1><field name="name" /></h1>
                    </div>
	                <group>
	                    <group>
	                        <field name="target_date"/>
                            <field name="sale_line_id" readonly="True"/>
	                    </group>
	                    <group>
	                        <field name="estimated_hours" widget="float_time"/>
	                    </group>
	                </group>
                    <group>
                        <field name="progress" widget="progressbar"/>
                        <field name="project_id" readonly="True"/>
                        <field name="project_task_ids"
                               context="{'default_project_id': project_id,
                                         'default_date_end': target_date,
                                         'default_milestone_id': active_id}"/>
                        <field name="fold"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

</odoo>
